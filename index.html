<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Composable Support - GitHub Discussions Forum</title>
    <link rel="icon" type="image/svg+xml" href="https://cdn.jsdelivr.net/npm/simple-icons/icons/github.svg">
    <style>
        /* Global styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #fff;
            color: #333;
            display: flex;
            flex-direction: column;
        }

        /* Topbar styling */
        .topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background-color: #000;
            color: #fff;
            padding: 5px 15px;
            font-size: 16px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            height: 50px;
        }

        .logo-container img {
            height: 30px;
            width: auto;
        }

        /* Main layout */
        .content-wrapper {
            display: flex;
            margin-top: 70px;
            padding: 20px;
            gap: 20px;
        }

        .main-content {
            flex: 1;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Sidebar styles */
        .sidebar {
            width: 250px;
            background-color: #f4f4f4;
            padding: 20px;
            height: fit-content;
            box-shadow: -2px 0 5px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 70px;
            align-self: flex-start;
        }

        .sidebar h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }

        .sidebar a {
            display: block;
            text-decoration: none;
            color: #0074d9;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .sidebar a:hover {
            text-decoration: underline;
        }

        @media (max-width: 900px) {
            .content-wrapper {
                flex-direction: column;
                align-items: center;
            }

            .sidebar {
                width: 100%;
                position: relative;
                top: 0;
            }
        }
    </style>
</head>

<body>
    <!-- Black topbar -->
    <div class="topbar">
        <div class="logo-container">
            <img src="https://dev.composable.ai/images/LogoNav.png" alt="Composable Logo">
        </div>
    </div>

    <!-- Main content wrapper -->
    <div class="content-wrapper">
        <div class="main-content">
            <h2>GitHub Discussions</h2>
            <p>Join the conversation in our GitHub Discussions support forum. Share questions, solutions, and ideas with the Composable community.</p>
            <hr>
            <div id="discussions-container">Loading discussions...</div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar">
            <h3>Need More Help?</h3>
            <a href="mailto:support@composable.ai">ðŸ“§ Email Support</a>
            <a href="https://docs.composable.ai" target="_blank">ðŸ“– View Documentation</a>
            <a href="https://composable.ai/schedule-a-demo/" target="_blank">ðŸ“… Request a Live Session</a>
        </div>
    </div>

    <script>
        const discussionsContainer = document.getElementById('discussions-container');
        const apiUrl = 'https://api.github.com/repos/ComposableAnalytics/Docs/discussions';

        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                discussionsContainer.innerHTML = '';
                data.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));
                data.forEach(discussion => {
                    const div = document.createElement('div');
                    div.classList.add('discussion');
                    div.innerHTML = `
                        <a class="discussion-title" href="${discussion.html_url}" target="_blank">${discussion.title}</a>
                        <p class="discussion-body">${discussion.body.slice(0, 100)}...</p>
                    `;
                    discussionsContainer.appendChild(div);
                });
            })
            .catch(err => {
                console.error('Error fetching discussions:', err);
                discussionsContainer.innerHTML = 'Failed to load discussions. Please try again later.';
            });
    </script>
</body>

</html>
